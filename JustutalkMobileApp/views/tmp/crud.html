<!--main view-->
<div id="crud-view" data-id="crud-view" data-role="view"
     data-title="Hot Number Settings"
     data-model="app.crudService.viewModel">

    <div id="hero" class="hero">
        <p>Hot Number Settings</p>
    </div>


    <div class="ui segment">

        <a id="btnAdd" class="bg-white jt-button-green" data-role="button" data-icon="add"
           data-bind="events: { click: addProduct }">
                Add New
        </a>

        <h4 class="ui horizontal header divider">
            <i class="tag icon"></i>Hot numbers
        </h4>

        <div>

            <table class="ui very basic celled table unstackable">
                <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Email</th>
                </tr>
                </thead>
                <tbody data-template="crud-table-tpl" data-bind="source: dsCrud">

                </tbody>
            </table>

        </div>

    </div>

    <ul id="delete-actions" data-role="actionsheet">
        <div style="margin:10px; text-align:center;">Delete Item:</div>
        <li class="km-actionsheet-title">Delete Item:</li>
        <li><a href="#" data-action="app.crudService.viewModel.showDetails">Details</a></li>
        <li><a href="#" data-action="app.crudService.viewModel.editProduct">Edit</a></li>-->
        <li><a href="#" data-action="app.crudService.viewModel.destroyProduct">Delete</a></li>
    </ul>

</div>

<!--listview template-->
<script type="text/x-kendo-tmpl" id="crud-table-tpl">
    <tr>
        <td class="collapsing">

            <a data-role="button" class="km-primary km-button-right km-icon-button"
             data-bind="events: { click: editProduct }" id="#= tid #" data-id="#= tid #" data-actionsheet-context="#= tid #">
                <span class="km-icon km-edit"></span>
            </a>

            <a data-role="button" class="km-primary km-button-right km-icon-button"
             data-rel="actionsheet" href="\\#delete-actions" data-actionsheet-context="#= tid #">
                <span class="km-icon km-delete"> </span>
            </a>

        </td>
        <td>
            <h4 class="ui image header">
                <div class="content">
                    #:name#
                    <div class="sub header">Human Resources</div>
                </div>
            </h4>
        </td>
        <td>
            #:email#
        </td>
    </tr>
</script>



<script id="productHeader" type="text/x-kendo-template">
    <span>Name</span>
</script>

<!--editor-->
<div id="editor" data-role="view" data-init="editorViewInit" data-show="onViewShow"
     data-model="app.crudService.viewModel" data-title="Edit Product Information">

    <section class="ui segment">
        <ul id="form" data-role="listview" data-style="inset">
            <li>
                <label>
                    Name:
                    <input id="name" name="name" type="text" required="required" data-bind="value: selectedProduct.name" />
                </label>
            </li>
            <li>
                <label>
                    status:
                    <input id="status" name="status" type="number" required="required" data-bind="value: selectedProduct.status" />
                </label>
            </li>
            <li>
                <label>
                    email:
                    <input id="email" name="email" type="text" required="required" data-bind="value: selectedProduct.email"/>
                </label>
            </li>

        </ul>
    </section>
    <section class="ui  right aligned segment">
        <a id="btnCreate" data-role="button" type="button" data-align="right" data-bind="events: {click: saveProduct}">Save</a>
        <a id="btnCancel" data-role="button" type="button" data-align="right" data-bind="events: {click: cancelChanges}">Cancel</a>
    </section>

</div>

<!--details view-->
<div id="details" data-role="view" data-show="onViewShow"
     data-model="app.crudService.viewModel"
     data-title="Details" data-layout="default">

    <section class="ui segment">
        <ul id="info" data-role="listview" data-style="inset">
            <li>
                name:
                <span data-bind="text: selectedProduct.name"></span>
            </li>
            <li>
                status:
                <span data-bind="text: selectedProduct.status"></span>
            </li>
            <li>
                email:
                <span data-bind="text: selectedProduct.email"></span>
            </li>

        </ul>
    </section>

    <section class="ui  right aligned segment">
        <a id="btnBack" data-role="button" href="#:back">Back</a>
    </section>



</div>


<script type="text/javascript">

    function editorViewInit(e) {
        app.crudService.validator = $("#form").kendoValidator({ //initialize the validator
            messages: {
                required: function(input) { //create a custom message function
                    input.attr("placeholder", input.attr("name") + " is required");
                }
            }
        }).data("kendoValidator");
    }

    function onViewShow(e) {

        var tid = e.view.params.tid, //get the query string parameter
        dataItem = app.crudService.viewModel.dsCrud.get(tid);
        app.crudService.viewModel.set("selectedProduct", dataItem);  //sets the selected product 

    }

</script>

<style type="text/css">

</style>